---
tags:
  - work
aliases:
  - system design 001
title: system design 001
description:
parent nodes:
  - "[[202510300118 - proposal 001]]"
child nodes:
annotation-target:
---

**A. Reasoning Core (Small LLM + Scratchpad)**

- **Internal scratchpad** (hidden from users): chain-of-thought style reasoning for planning and self-checks.
    
- **Program-Aided** hints when useful (e.g., emotion labeller outputs fed as structured hints to the solver).
    
- **Self-consistency** (sample multiple short internal plans, pick or merge via checker for final answer).
    
- **Toolformer/ReAct-lite**: controlled tool calls to (i) RAG retriever, (ii) emotion classifier, (iii) safety policy checker.
    

**B. Planner–Solver–Checker**

- **Planner**: decomposes user goal (e.g., “reflect on burnout patterns”) into micro-steps (clarify context → probe emotions → suggest journaling frame → offer coping options).
    
- **Solver**: drafts the user-visible reply using retrieved snippets + style policy (supportive, non-diagnostic).
    
- **Checker**:
    
    - **Factuality**: Does the reply align with the retrieved sources?
        
    - **Scope/Safety**: flags diagnostic/medical claims; nudges to disclaimers; provides resources if risk cues appear.
        
    - **Reasoning quality**: rule-based or small verifier model to catch contradictions.
        

**C. RAG (Domain Grounding)**

- Curated, non-clinical, evidence-based resources (psychoeducation, worksheets, journaling prompts).
    
- Chunked, citation-ready passages; **semantic + keyword** hybrid retrieval; de-duplication and recency tagging.
    
- Multilingual indexing (EN/NL), with locale-aware retrieval.
    

**D. Symptom/State & Strategy Layer**

- **Lightweight classifier** (emotion, stressors, cognitive distortions, coping intentions).
    
- **NCF or bandit-style recommender** for **methods that helped similar users** (purely non-diagnostic; opt-in; anonymised).
    
- Explanations like: “People who reported X often found Y helpful.”
    

**E. Privacy & Learning**

- **On-device inference** is used where possible; **telemetry is disabled by default**.
    
- **Federated learning** (Flower/FedML) for classifier/recommender updates; DP-noise optional; no raw logs leave the device.
    
- Server index for RAG can be public/hosted; user texts are never stored without consent.
    
