---
tags:
  - academic
aliases:
  - ssh rel
title: ssh rel - liacs
description: how to ssh into LIACS REL lab
parent nodes:
  - "[[003 - genesis/academic/leiden/leiden|leiden]]"
child nodes: 
annotation-target: 
---

## Overview

```
ssh -v s4374886@sshgw.leidenuniv.nl # SSH into remote host
ssh -K U0065004 # SSH into system

ssh -o ProxyCommand='ssh -g -L 6020:localhost:6020 s4374886@sshgw.leidenuniv.nl -q -W U0065000:22' -g -L 6020:localhost:6020 s4374886@U0065000

jupyter-notebook --no-browser --port=6020 # Run Jyputer notebook
```


```
ssh -L 6020:localhost:6020 s4374886@sshgw.leidenuniv.nl

ssh -L 6020:localhost:6020 s4374886@U0065004
```
## Launching Jupyter Notebook or Tensorboard remotely

#### SSH command template

To launch the Jupyter server remotely, you must log in via SSH using port forwarding. The example below shows the generic terminal command for logging in:

```
ssh -o ProxyCommand='ssh -g -L <PORT>:localhost:<PORT> <ULCN>@sshgw.leidenuniv.nl -q -W <COMPUTER_ID>:22' -g -L <PORT>:localhost:<PORT> <ULCN>@<COMPUTER_ID>

// SomeDude
ssh -o ProxyCommand='ssh -g -L 6020:localhost:6020 s4374886@sshgw.leidenuniv.nl -q -W U0065000:20' -g -L 6020:localhost:6020 s4374886@U0065000

ssh -o ProxyCommand='ssh -g -L 6022:localhost:6022 s4374886@sshgw.leidenuniv.nl -q -W U0065004:22' -g -L 6022:localhost:6022 s4374886@U0065004

ssh -o ProxyCommand='ssh -g -L 6029:localhost:6029 s4374886@sshgw.leidenuniv.nl -q -W U0065005:29' -g -L 6029:localhost:6029 s4374886@U0065005
```

---
#### SSH command example

The extended example below shows how to forward the port number 6020 both for the gateway server (sshgw.leidenuniv.nl) and the machine (U0032484) that you are logging into:

```
ssh -o ProxyCommand='ssh -g -L 6020:localhost:6020 s1234567@sshgw.leidenuniv.nl -q -W U0032484:22' -g -L 6020:localhost:6020 s1234567@U0032484
```


Important: if someone else has logged in using a particular port, you must use a different one. Therefore, before logging in, think of a unique one for yourself (recommended port number range = [1024 - 49151])

---

#### Remote Jupyter notebook

Then once you are in, you need to launch the Jupyter Notebook with the same port specified as the target:

```
jupyter-notebook --no-browser --port=6020
```


You will be prompted with links to paste into your machine's browser to open up the Jupyter Notebook web interface.

Note: if Jupyter does not run, you probably need to set up a Conda environment.

---

#### Remote Tensorboard

To run Tensorboard (assuming you have some logs in a directory that you specify):

```
tensorboard --logdir=path/to/the/directory/of/your/logs --port=6020
```

Then to open it, enter the following address in your browser

```
localhost:6020/
```

---

# Setting up a Conda environment and Tensorflow

Following these instructions, you will learn how to set up the virtual environment for [Tensorflow 2.0+](https://www.tensorflow.org/tutorials/) with GPU support using [conda](https://docs.conda.io/en/latest/#) on LIACS Lab machines or any other Unix system.

Note: If your laptop or PC does not have an NVidia graphics card with CUDA Compute 3.5+ compatibility (list of cards), you can only use the CPU version of TensorFlow, which will be considerably slower.

The main reason for using conda is that it runs all dependencies in a container that is isolated from the rest of the system. It also has a rich repository of downloadable packages and does not require super-user privileges when installing them.

### 1. Download and install Miniconda

In a bash terminal:

```
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh

bash Miniconda3-latest-Linux-x86_64.sh
```

> (1) 'yes' after reading the Terms and Conditions

> (2) Optionally choose the path for miniconda installation

> (3) 'yes' when the installer prompts:

> Do you wish the installer to initialise Miniconda3 by running conda init? ## [yes|no] 

# Restart your terminal OR enter the following command (if using bash):

```
. ~/.bashrc 
```

If you are installing on your own machine, please look up the instructions for your particular OS ([Conda installation](https://docs.conda.io/projects/conda/en/latest/user-guide/install/)).

### 2. Create a new conda environment, install dependencies

This assumes that you have a [compatible Nvidia graphics card](https://docs.nvidia.com/deploy/cuda-compatibility/index.html) running NVidia driver version 535.00+ (which is the case on most machines in LIACS lab).

```
conda create --name IDL python=3.12 jupyter  # Create a new conda environment with Python and Jupyter 

conda activate IDL # Activate it (always use this command whenever you re-login on one of the machines or start a new terminal) 

pip install tensorflow[and-cuda] # Get the latest version of tensorflow for Python with GPU support and the rest of the NVidiadependencies
```

### 3. Test whether Tensorflow can see your GPU:

If the installation was successful you should see whether your GPU is detected by Tensorflow using the following command:

```
python -c "import tensorflow as tf; print(tf.config.list_physical_devices('GPU'))"
```

The output should look something like this:
```
Out[5]: PhysicalDevice(name='/physical_device:GPU:0', device_type='GPU')]
```

---

%% 
(resources:: Resources - 202501251759)
%%
> [!info] 2025-01-25
> > [!example] **Resources:**
> > - https://rel.liacs.nl/general/ssh-access
> > - https://rel.liacs.nl/issc/ssh-access
